<html>
  <head>
    <title>Using cookies</title>
    <script>
      // # Using cookies
      document.cookie = "name=Maaike;favoriteColor=black";

      let cookie = decodeURIComponent(document.cookie);
      let cookieList = cookie.split(";");
      for (let i = 0; i < cookieList.length; i++) {
        let c = cookieList[i];
        if (c.charAt(0) === " ") {
          c = c.trim();
        }
        if (c.startsWith("name")) {
          alert(c.substring(5, c.length));
        }
      }
    </script>
  </head>
  <body>
    <input type="text" onchange="setCookie(this)" />
    <button onclick="sayHi('name')">Let's talk, cookie!</button>
    <p id="hi"></p>

    <script>
      function setCookie(e) {
        document.cookie = "name=" + e.value + ";";
      }

      function sayHi(key) {
        let name = getCookie(key);
        document.getElementById("hi").innerHTML = "Hi " + name;
      }

      function getCookie(key) {
        let cookie = decodeURIComponent(document.cookie);
        let cookieList = cookie.split(";");
        for (let i = 0; i < cookieList.length; i++) {
          let c = cookieList[i];
          if (c.charAt(0) === " ") {
            c = c.trim();
          }
          if (c.startsWith(key)) {
            console.log("hi " + c);
            return c.substring(key.length + 1, c.length);
          }
        }
      }
    </script>
  </body>
</html>
